<!--https://stackoverflow.com/questions/4620239/css-whats-a-good-way-to-create-a-raised-box-effect-->
<app-header></app-header>

<div class="row">

  <div class="col-md-3">
    <app-project-nav></app-project-nav>
  </div>
  <div class="projectTable col-md-9">
    <nav class="navbar">
      <input class="form-control" type="text" name="search" placeholder="Search Data" [(ngModel)]="filter">
    </nav>
    <table class="table table table-striped table-bordered table-hover">
      <thead>
      <tr>
        <th>#</th>
        <th (click)="sort('appointmentId')">Appointment Id <i class="fa fa-caret-down"></i></th>
        <th (click)="sort('appointmentDate')">Appointment Date <i class="fa fa-caret-down"></i></th>
        <th (click)="sort('status')">Status <i class="fa fa-caret-down"></i></th>
      </tr>
      </thead>
      <tbody>
      <tr
        *ngFor="let data of allProject |filter:filter| orderBy: key : reverse| paginate: { itemsPerPage: 10, currentPage: p };let i=index"
        [attr.data-index]="i" data-toggle="modal"
        (click)="showProjectDetail(template,data.appointmentBy)">
        <th scope="row">{{i+1}}</th>
        <td>{{data.appointmentId}}</td>
        <td>{{data.appointmentDate}}</td>
        <td>{{data.status}}</td>

        <ng-template #template>
          <div class="modal-header">
            <h4 class="modal-title pull-left">Project Detail</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <b>Appointment Time </b><input type="time"><br>
            <b>Full Name</b>
            <p>{{fullName}}</p>
            <b>Email</b>
            <p>{{email}}</p>
            <b>Appointment ID</b>
            <p>{{data.appointmentId}}</p>
            <b>Contact Way</b>
            <p>{{data.contactWay}}</p>
            <b>Additional Note</b>
            <p>{{data.note}}</p>
            <b>Status</b>
            <p>{{data.status}}</p>
            <b>Additional Files</b><br>
            <a href="{{data.additionalFile}}" target="_blank"><img src="{{data.additionalFile}}" height="150px"
                                                                   width="350px" class="thumbnail">
            </a>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="modalRef.hide()">
              Close
            </button>
            <button type="button" (click)="acceptProject(data.appointmentId)" class="btn btn-primary">Accept Request
            </button>
            <button (click)="deleteProject(data.appointmentId)" style="border: none;background-color:white"><i
              class="fa fa-trash"></i>
            </button>
          </div>
        </ng-template>

      </tr>

      </tbody>
    </table>
    <pagination-controls (pageChange)="p = $event"></pagination-controls>

  </div>
</div>
